<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><title>Oracle单行函数 | MAKER BLOG</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="Ma"><meta name="designer" content="minfive"><meta name="keywords" content="maker,maker blog,java,javaweb,servlet,jsp,mysql,oracle,Spring,hibernate,struts2,算法，数据结构"><meta name="description" content="个人学习笔记分享"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="all"><link rel="canonical" href="http://yoursite.com/2018/03/14/Oracle基本命令02/index.html"><link rel="icon" type="image/png" href="/img/favicon.ico" sizes="32x32"><link rel="stylesheet" href="/scss/base/index.css"><link rel="alternate" href="/atom.xml" title="Maker"><link rel="stylesheet" href="/scss/views/page/post.css"></head><body ontouchstart><div id="page-loading" class="page page-loading" style="background-image:url(/img/loader.gif)"></div><div id="page" class="page js-hidden"><header class="page__small-header page__header--small"><nav class="page__navbar"><div class="page__container navbar-container"><a class="page__logo" href="/" title="Maker" alt="Maker"><img src="/img/logo.gif" alt="Maker"></a><nav class="page__nav"><ul class="nav__list clearfix"><li class="nav__item"><a href="/" alt="首页" title="首页">首页</a></li><li class="nav__item"><a href="/archives" alt="归档" title="归档">归档</a></li><li class="nav__item"><a href="/demo" alt="作品" title="作品">作品</a></li><li class="nav__item"><a href="/about" alt="关于" title="关于">关于</a></li></ul></nav><button class="page__menu-btn" type="button"><i class="iconfont icon-menu"></i></button></div></nav></header><main class="page__container page__main"><div class="page__content"><article class="page__post"><div class="post__cover"><img src="/img/oracle.gif" alt="Oracle单行函数"></div><header class="post__info"><h1 class="post__title">Oracle单行函数</h1><div class="post__mark"><div class="mark__block"><i class="mark__icon iconfont icon-write"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="https://www.github.com/Mabintao">Ma</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-time"></i><ul class="mark__list clearfix"><li class="mark__item"><span>2018-03-14</span></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-tab"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/tags/数据库/">数据库</a></li><li class="mark__item"><a href="/tags/Oracle/">Oracle</a></li><li class="mark__item"><a href="/tags/SQL/">SQL</a></li></ul></div></div></header><div class="post__content"><p>单行函数主要分为以下五类：字符函数、数字函数、日期函数、转换函数、通用函数；</p><h2 id="1-字符函数"><a href="#1-字符函数" class="headerlink" title="1.字符函数"></a>1.字符函数</h2><p>字符函数的功能主要是进行字符串数据的操作</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">upper(字符串|列)：将输入的字符串变为大写返回；</span><br><span class="line">lower(字符串|列)：将输入的字符串变为小写返回；</span><br><span class="line">initcap(字符串|列)：将输入的字符串转为首字母大写;</span><br><span class="line">length(字符串|列)：求字符串字符数;</span><br><span class="line">lengthb(字符串|列)：求字符串字节数;</span><br><span class="line">substr(字符串|列,b,c)：从字符串中，第b位开始取，取c位</span><br><span class="line">instr(字符串|列,b)：从字符串中找到b的位置</span><br><span class="line">trim('指定字符' from 字符串|列)：去掉前后指定的字符 </span><br><span class="line"><span class="keyword">replace</span>(字符串|列,被替换的字符，替换成哪个字符)：字符串替换;</span><br><span class="line">lpad(字符串|列,总位数，位数不足补充的符号) 左填充：向左填充符号达到指定的位数  </span><br><span class="line">rpad(字符串|列,总位数，位数不足补充的符号) 右填充：向右填充符号达到指定的位数</span><br><span class="line"></span><br><span class="line"><span class="comment">--1.upper,lower,initcap</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">lower</span>(<span class="string">'Hello World'</span>) 转小写,<span class="keyword">upper</span>(<span class="string">'Hello World'</span>) 转大写,initcap(<span class="string">'hello world'</span>) 首字母大写 <span class="keyword">from</span> dual;	</span><br><span class="line">结果：</span><br><span class="line">转小写      转大写      首字母大写     </span><br><span class="line"><span class="comment">----------- ----------- ----------- </span></span><br><span class="line">hello world HELLO WORLD Hello World</span><br><span class="line"></span><br><span class="line"><span class="comment">--2.length 字符数 lengthb 字节数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">length</span>(<span class="string">'北京'</span>) 字符,lengthb(<span class="string">'北京'</span>) 字节 <span class="keyword">from</span> dual;</span><br><span class="line">结果：	  </span><br><span class="line">字符       字节          </span><br><span class="line"><span class="comment">---------- ----------      </span></span><br><span class="line">  2          4 </span><br><span class="line"></span><br><span class="line"><span class="comment">--3.substr(字符串 | 列，开始点)，表示从开始点一直截取到结尾；</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'Hello World'</span>,<span class="number">4</span>) 子串 <span class="keyword">from</span> dual;</span><br><span class="line">结果：</span><br><span class="line">子串    </span><br><span class="line"><span class="comment">--------   </span></span><br><span class="line">lo World </span><br><span class="line">	</span><br><span class="line"><span class="comment">--4.substr(字符串 | 列，开始点，截取长度)，表示从开始点截取指定长度的字符串</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'Hello World'</span>,<span class="number">4</span>,<span class="number">3</span>) 子串 <span class="keyword">from</span> dual;</span><br><span class="line">结果：</span><br><span class="line">子串 </span><br><span class="line"><span class="comment">---------</span></span><br><span class="line">lo</span><br><span class="line"></span><br><span class="line"><span class="comment">--5.instr(字符串|列,b)：从字符串中找到b的位置</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">instr</span>(<span class="string">'hello world'</span>,<span class="string">'world'</span>) <span class="keyword">index</span> <span class="keyword">from</span> dual;</span><br><span class="line">结果：</span><br><span class="line">index</span><br><span class="line"><span class="comment">---------</span></span><br><span class="line">7</span><br><span class="line"></span><br><span class="line"><span class="comment">--6.trim 去掉前后指定的字符 </span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">trim</span>(<span class="string">'H'</span> <span class="keyword">from</span> <span class="string">'HHello WorldH'</span>) res <span class="keyword">from</span> dual;</span><br><span class="line">结果：</span><br><span class="line">res</span><br><span class="line"><span class="comment">--------</span></span><br><span class="line">ello World</span><br><span class="line"></span><br><span class="line"><span class="comment">--7.replace 字符串替换;</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">replace</span>(<span class="string">'Hello World'</span>,<span class="string">'l'</span>,<span class="string">'@'</span>) res <span class="keyword">from</span> dual;</span><br><span class="line">结果：</span><br><span class="line">res</span><br><span class="line"><span class="comment">------------</span></span><br><span class="line">He@@o Wor@d</span><br><span class="line"></span><br><span class="line"><span class="comment">--8.lpad 左填充 rpad右填充</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">lpad</span>(<span class="string">'abcd'</span>,<span class="number">10</span>,<span class="string">'*'</span>) 左, rpad(<span class="string">'abcd'</span>,<span class="string">'10'</span>,<span class="string">'*'</span>) 右 <span class="keyword">from</span> dual;</span><br><span class="line">结果：</span><br><span class="line">左         右          </span><br><span class="line"><span class="comment">---------- ----------      </span></span><br><span class="line">******abcd abcd******</span><br></pre></td></tr></table></figure><h2 id="2-数字函数"><a href="#2-数字函数" class="headerlink" title="2.数字函数"></a>2.数字函数</h2><p>数字函数主要对数字进行四舍五入，截取以及取余操作<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">round(数字 | 列 [,保留小数的位数])：四舍五入的操作；</span><br><span class="line">trunc(数字 | 列 [,保留小数的位数])：舍弃指定位置的内容；</span><br><span class="line">mod:(数字 1，数字2)：取模，取余数；</span><br><span class="line"></span><br><span class="line"><span class="comment">--1.round(数值，第几位) 四舍五入</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">45.456</span>,<span class="number">2</span>) 一, <span class="keyword">round</span>(<span class="number">45.456</span>,<span class="number">1</span>) 二, <span class="keyword">round</span>(<span class="number">45.456</span>,<span class="number">0</span>) 三, <span class="keyword">round</span>(<span class="number">45.456</span>,<span class="number">-1</span>) 四, <span class="keyword">round</span>(<span class="number">45.456</span>,<span class="number">-2</span>) 五 <span class="keyword">from</span> dual；</span><br><span class="line">结果：</span><br><span class="line">        一         二         三         四         五                          </span><br><span class="line"><span class="comment">---------- ---------- ---------- ---------- ----------                          </span></span><br><span class="line">     <span class="number">45.46</span>       <span class="number">45.5</span>         <span class="number">45</span>         <span class="number">50</span>          <span class="number">0</span>    </span><br><span class="line"></span><br><span class="line"><span class="comment">--2.trunc(数值,第几位) 截断</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">45.926</span>,<span class="number">2</span>) 一,trunc(<span class="number">45.926</span>,<span class="number">1</span>) 二,trunc(<span class="number">45.926</span>,<span class="number">0</span>) 三,trunc(<span class="number">45.926</span>,<span class="number">-1</span>) 四,trunc(<span class="number">45.926</span>,<span class="number">-2</span>) 五 <span class="keyword">from</span> dual</span><br><span class="line">结果：</span><br><span class="line">        一         二         三         四         五                          </span><br><span class="line"><span class="comment">---------- ---------- ---------- ---------- ----------                          </span></span><br><span class="line">     <span class="number">45.92</span>       <span class="number">45.9</span>         <span class="number">45</span>         <span class="number">40</span>          <span class="number">0</span>   </span><br><span class="line"></span><br><span class="line"><span class="comment">--3.mod(数值，按照哪个数进行取余) 取余</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">mod</span>(<span class="number">10</span>,<span class="number">3</span>) res <span class="keyword">from</span> dual;</span><br><span class="line">结果：</span><br><span class="line">	res</span><br><span class="line"><span class="comment">------------</span></span><br><span class="line">	 1</span><br></pre></td></tr></table></figure><p></p><h2 id="3-日期函数"><a href="#3-日期函数" class="headerlink" title="3.日期函数"></a>3.日期函数</h2><p>获取当前日期”sysdate”并进行操作<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--1.获取当前日期</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sysdate</span> <span class="keyword">from</span> dual;</span><br><span class="line">SYSDATE                                                                         </span><br><span class="line"><span class="comment">------------                                                                    </span></span><br><span class="line">14-MAR-18 </span><br><span class="line"></span><br><span class="line"><span class="comment">--2.对当前日求进行格式化</span></span><br><span class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'yyyy-mm-dd hh24:mm:ss'</span>) <span class="keyword">format</span> <span class="keyword">from</span> dual;</span><br><span class="line">format                                                           </span><br><span class="line"><span class="comment">-------------------                                                             </span></span><br><span class="line">2018-03-14 09:03:40</span><br><span class="line"></span><br><span class="line"><span class="comment">--日期 + 数字 = 日期，表示若干天之后的日期；</span></span><br><span class="line"><span class="comment">--日期 – 数字 = 日期，表示若干天前的日期；</span></span><br><span class="line"><span class="comment">--3.昨天 今天 明天</span></span><br><span class="line"><span class="keyword">select</span> (<span class="keyword">sysdate</span><span class="number">-1</span>) 昨天,<span class="keyword">sysdate</span> 今天,(<span class="keyword">sysdate</span>+<span class="number">1</span>) 明天 <span class="keyword">from</span> dual;</span><br><span class="line">昨天         今天         明天                                                  </span><br><span class="line"><span class="comment">------------ ------------ ------------                                          </span></span><br><span class="line">13-MAR-18    14-MAR-18    15-MAR-18       </span><br><span class="line"></span><br><span class="line"><span class="comment">--日期 – 日期 = 数字，表示的是两个日期间的天数，但是肯定是大日期 – 小日期；</span></span><br><span class="line"><span class="comment">--4.计算员工的工龄:   天  星期  月  年 （不准确版）</span></span><br><span class="line"><span class="keyword">select</span> ename,hiredate,(<span class="keyword">sysdate</span>-hiredate)天,(<span class="keyword">sysdate</span>-hiredate)/<span class="number">7</span> 星期,(<span class="keyword">sysdate</span>-hiredate)/<span class="number">30</span> 月,(<span class="keyword">sysdate</span>-hiredate)/<span class="number">365</span> 年 <span class="keyword">from</span> emp;</span><br><span class="line">ENAME      HIREDATE             天       星期         月         年             </span><br><span class="line"><span class="comment">---------- ------------ ---------- ---------- ---------- ----------             </span></span><br><span class="line">SMITH      17-DEC-80    13601.3857  1943.0551 453.379523 37.2640704             </span><br><span class="line">ALLEN      20-FEB-81    13536.3857 1933.76938 451.212856 37.0859882             </span><br><span class="line">WARD       22-FEB-81    13534.3857 1933.48367  451.14619 37.0805088</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--5.不允许 日期 + 日期</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sysdate</span> + hiredate <span class="keyword">from</span> emp;</span><br><span class="line">+hiredate from emp</span><br><span class="line">*</span><br><span class="line">ERROR at line 1:</span><br><span class="line">ORA-00975: date + date not allowed</span><br><span class="line"></span><br><span class="line"><span class="comment">--6.months_between 计算两个日期相差的月份</span></span><br><span class="line"><span class="keyword">select</span> ename,hiredate,trunc((<span class="keyword">sysdate</span>-hiredate)/<span class="number">30</span>) 不准确,trunc(months_between(<span class="keyword">sysdate</span>,hiredate))  准确 <span class="keyword">from</span> emp</span><br><span class="line">ENAME      HIREDATE         不准确       准确</span><br><span class="line"><span class="comment">---------- ------------ ---------- ----------</span></span><br><span class="line">SMITH      <span class="number">17</span>-<span class="built_in">DEC</span><span class="number">-80</span>           <span class="number">453</span>        <span class="number">446</span></span><br><span class="line">ALLEN      <span class="number">20</span>-FEB<span class="number">-81</span>           <span class="number">451</span>        <span class="number">444</span></span><br><span class="line">WARD       <span class="number">22</span>-FEB<span class="number">-81</span>           <span class="number">451</span>        <span class="number">444</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">--7.计算两个日期相差的年份 通过计算月份 除以12</span></span><br><span class="line"><span class="keyword">select</span> ename,hiredate,trunc((<span class="keyword">sysdate</span>-hiredate)/<span class="number">365</span>) 不准确,trunc(months_between(<span class="keyword">sysdate</span>,hiredate)/<span class="number">12</span>)  准确  <span class="keyword">from</span> emp</span><br><span class="line">ENAME      HIREDATE         不准确       准确</span><br><span class="line"><span class="comment">---------- ------------ ---------- ----------</span></span><br><span class="line">SMITH      <span class="number">17</span>-<span class="built_in">DEC</span><span class="number">-80</span>            <span class="number">37</span>         <span class="number">37</span></span><br><span class="line">ALLEN      <span class="number">20</span>-FEB<span class="number">-81</span>            <span class="number">37</span>         <span class="number">37</span></span><br><span class="line">WARD       <span class="number">22</span>-FEB<span class="number">-81</span>            <span class="number">37</span>         <span class="number">37</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--8.add_months 多少个月后 </span></span><br><span class="line"><span class="comment">--53个月后</span></span><br><span class="line"><span class="keyword">select</span> add_months(<span class="keyword">sysdate</span>,<span class="number">53</span>) res <span class="keyword">from</span> dual;</span><br><span class="line">res                                                                    </span><br><span class="line"><span class="comment">------------                                                                    </span></span><br><span class="line">14-AUG-22   </span><br><span class="line"></span><br><span class="line"><span class="comment">--9.last_day 一个月的最后一天</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">last_day</span>(<span class="keyword">sysdate</span>) res <span class="keyword">from</span> dual;</span><br><span class="line">res                                                                  </span><br><span class="line"><span class="comment">------------                                                                    </span></span><br><span class="line">31-MAR-18 </span><br><span class="line"></span><br><span class="line"><span class="comment">--10.next_day 下一个星期几</span></span><br><span class="line"><span class="keyword">select</span> next_day(<span class="keyword">sysdate</span>,<span class="string">'friday'</span>) res <span class="keyword">from</span> dual;</span><br><span class="line">res                                                                </span><br><span class="line"><span class="comment">------------                                                                    </span></span><br><span class="line">16-MAR-18 </span><br><span class="line"></span><br><span class="line">在所有的开发之中，如果是日期的操作，建议使用以上的函数，因为这些函数可以避免闰年的问题。</span><br></pre></td></tr></table></figure><p></p><h2 id="4-转换函数"><a href="#4-转换函数" class="headerlink" title="4.转换函数"></a>4.转换函数</h2><p>转换函数的主要功能是完成数字(Number),字符串(Varchar),日期(Date)集中数据之间的相互转换操作，一共有三种转换函数<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">to_char(字符串 | 列，格式字符串):将日期或者是数字变为指定格式的字符串显示</span><br><span class="line">to_date(字符串，格式字符串)：将字符串变为DATE数据显示；</span><br><span class="line">t0_number(字符串)：将字符串变为数字显示；</span><br><span class="line"></span><br><span class="line"><span class="comment">--1.to_char 将数字/日期转换为指定格式的字符串</span></span><br><span class="line"><span class="comment">--(1) 日期转为字符串</span></span><br><span class="line"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'yyyy-mm-dd hh24:mi:ss'</span>) 日期 <span class="keyword">from</span> dual</span><br><span class="line">日期</span><br><span class="line"><span class="comment">-------------------</span></span><br><span class="line"><span class="number">2018</span><span class="number">-03</span><span class="number">-14</span> <span class="number">15</span>:<span class="number">05</span>:<span class="number">54</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>月 在上面的语句中显示为<span class="number">03</span> 去除其前导<span class="number">0</span> 可以加上<span class="string">"fm"</span></span><br><span class="line"><span class="keyword">SELECT</span> TO_CHAR(<span class="keyword">SYSDATE</span>,<span class="string">'fmyyyy-mm-dd'</span>) <span class="keyword">day</span> <span class="keyword">FROM</span> dual;</span><br><span class="line">DAY</span><br><span class="line"><span class="comment">----------</span></span><br><span class="line">2018-3-14</span><br><span class="line"></span><br><span class="line">注意：在使用to_char()函数之后，所有的内容都是字符串，不再是之前的date型数据</span><br><span class="line"></span><br><span class="line"><span class="comment">--(2) 数字转为字符串</span></span><br><span class="line">数字转为字符串 "9" 代表一位数字 "l"代表所在语言环境下本地货币符号</span><br><span class="line"><span class="comment">--查询员工的薪水:两位小数，千位符,本地货币代码</span></span><br><span class="line"><span class="keyword">select</span> to_char(sal,<span class="string">'L9,999.99'</span>) 薪水 <span class="keyword">from</span> emp;</span><br><span class="line">薪水                                                             </span><br><span class="line"><span class="comment">-------------------                                                             </span></span><br><span class="line">$800.00 </span><br><span class="line">$1,600.00 </span><br><span class="line">$1,250.00 </span><br><span class="line"></span><br><span class="line"><span class="comment">--2.to_date 此函数的主要功能是将一个字符串变为DATE型数据。</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">to_date</span>(<span class="string">'2018-03-14'</span>,<span class="string">'yyyy-mm-dd'</span>) <span class="keyword">from</span> dual;</span><br><span class="line">TO_DATE('201</span><br><span class="line"><span class="comment">------------</span></span><br><span class="line">14-MAR-18</span><br><span class="line"></span><br><span class="line">一般此函数在更新数据库的时候使用较多；</span><br><span class="line"></span><br><span class="line"><span class="comment">--3.to_number()函数：把字符串转为数字</span></span><br><span class="line"><span class="keyword">select</span> to_number(<span class="string">'10'</span>) + to_number(<span class="string">'20'</span>) res <span class="keyword">from</span> dual;</span><br><span class="line"> RES</span><br><span class="line"><span class="comment">----------</span></span><br><span class="line"> 30</span><br><span class="line"></span><br><span class="line">但是Oracle存在隐式转换 就算不使用to_number也可以完成，所以现在to_number韩式基本不用啦</span><br><span class="line"><span class="keyword">select</span> <span class="string">'10'</span> + <span class="string">'20'</span> res <span class="keyword">from</span> dual；</span><br><span class="line">RES</span><br><span class="line"><span class="comment">----------</span></span><br><span class="line"> <span class="number">30</span></span><br><span class="line"></span><br><span class="line">重点函数 to_char() 其次为 <span class="keyword">to_date</span>()</span><br></pre></td></tr></table></figure><p></p><h2 id="5-通用函数"><a href="#5-通用函数" class="headerlink" title="5.通用函数"></a>5.通用函数</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">decode():多数值判断,类似于程序中的if…else…语句，唯一不同的是DECODE()函数判断的是数值，而不是逻辑条件,重点掌握</span><br><span class="line">nvl(a,b):当a=null的时候返回b</span><br><span class="line">nvl2(a,b,c):当a=null的时候，返回c,否则返回b</span><br><span class="line">nullif(a,b)：当a=b的时候，返回null,否则返回a</span><br><span class="line">coalesce(任意列):从左到右，找到第一个不为null的值</span><br><span class="line"></span><br><span class="line"><span class="comment">--1.decode 给员工涨工资,总裁1000，经理800，其他400</span></span><br><span class="line"><span class="keyword">select</span> ename,job,sal 涨前,<span class="keyword">decode</span>(job,<span class="string">'PRESIDENT'</span>,sal+<span class="number">1000</span>,<span class="string">'MANAGER'</span>,sal+<span class="number">800</span>,sal+<span class="number">400</span>) 涨后</span><br><span class="line"><span class="keyword">from</span> emp;</span><br><span class="line">ENAME      JOB             涨前       涨后                           </span><br><span class="line"><span class="comment">---------- --------- ---------- ----------                     </span></span><br><span class="line">SMITH      CLERK            800       1200          </span><br><span class="line">ALLEN      SALESMAN        1600       2000        </span><br><span class="line">WARD       SALESMAN        1250       1650            </span><br><span class="line">JONES      MANAGER         2975       3775 </span><br><span class="line"></span><br><span class="line">DECODE()函数是整个Oracle之中最具特点的函数，一定要将其掌握</span><br><span class="line"></span><br><span class="line"><span class="comment">--2.nvl(a,b) 当a=null的时候,返回b;否则返回a</span></span><br><span class="line">ENAME            COMM</span><br><span class="line"><span class="comment">---------- ----------</span></span><br><span class="line">SMITH</span><br><span class="line">ALLEN             300</span><br><span class="line">WARD              500</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename,nvl(comm,<span class="number">0</span>) <span class="keyword">from</span> emp; </span><br><span class="line">ENAME      NVL(COMM,0)</span><br><span class="line"><span class="comment">---------- -----------</span></span><br><span class="line">SMITH                0</span><br><span class="line">ALLEN              300</span><br><span class="line">WARD               500</span><br><span class="line"></span><br><span class="line"><span class="comment">--3.nvl2(a,b,c)  当a=null的时候,返回c；否则返回b</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> sal*<span class="number">12</span>+nvl2(comm,comm,<span class="number">0</span>) <span class="keyword">from</span> emp;</span><br><span class="line">SAL*12+NVL2(COMM,COMM,0)                                                        </span><br><span class="line"><span class="comment">------------------------                                                        </span></span><br><span class="line">                    9600                                                        </span><br><span class="line">                   19500                                                        </span><br><span class="line">                   15500  </span><br><span class="line"></span><br><span class="line"><span class="comment">--4.nullif(a,b) 当a=b的时候,返回null;否则返回a</span></span><br><span class="line">                                                      </span><br><span class="line"><span class="keyword">select</span> <span class="keyword">nullif</span>(<span class="string">'abc'</span>,<span class="string">'abc'</span>) <span class="keyword">from</span> dual;</span><br><span class="line">NUL                                                                             </span><br><span class="line"><span class="comment">---                                                                             </span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">select</span> <span class="keyword">nullif</span>(<span class="string">'abc'</span>,<span class="string">'ab3c'</span>) <span class="keyword">from</span> dual</span><br><span class="line">NUL                                                                             </span><br><span class="line"><span class="comment">---                                                                             </span></span><br><span class="line">abc </span><br><span class="line"></span><br><span class="line"><span class="comment">--5.coalesce 从左到右 找到第一个不为null的值</span></span><br><span class="line"><span class="keyword">select</span> comm,sal,<span class="keyword">coalesce</span>(comm,sal)</span><br><span class="line">      COMM        SAL 第一个不为<span class="literal">null</span>的值                                        </span><br><span class="line"><span class="comment">---------- ---------- ------------------                                        </span></span><br><span class="line">                  <span class="number">800</span>                <span class="number">800</span>                                        </span><br><span class="line">       <span class="number">300</span>       <span class="number">1600</span>                <span class="number">300</span>                                        </span><br><span class="line">       <span class="number">500</span>       <span class="number">1250</span>                <span class="number">500</span>                                        </span><br><span class="line">                 <span class="number">2975</span>               <span class="number">2975</span></span><br></pre></td></tr></table></figure><div class="post-announce">感谢您的阅读，本文由 <a href="http://yoursite.com">Maker</a> 版权所有。如若转载，请注明出处：Maker（<a href="http://yoursite.com/2018/03/14/Oracle基本命令02/">http://yoursite.com/2018/03/14/Oracle基本命令02/</a>）</div><div class="post__prevs"><div class="post__prev"><a href="/2018/03/11/Oracle基本命令/" title="Oracle下的基本查询"><i class="iconfont icon-prev"></i>Oracle下的基本查询</a></div><div class="post__prev post__prev--right"><a href="/2018/03/14/Oracle基本命令03/" title="Oracle多行函数">Oracle多行函数<i class="iconfont icon-next"></i></a></div></div></div></article></div><aside class="page__sidebar"><form id="page-search-from" class="page__search-from" action="/search/"><label class="search-form__item"><input class="input" type="text" name="search" placeholder="Search..."> <i class="iconfont icon-search"></i></label></form><div class="sidebar__block"><h3 class="block__title">FOR YOU</h3><p class="block__text">能同途偶遇在这星球上,燃亮飘渺人生,我多么够运#很高心遇到你#</p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="300" height="400" src="//music.163.com/outchain/player?type=0&id=2136099488&auto=0&height=430&data-index=2"></iframe></div><div class="sidebar__block"><h3 class="block__title">文章标签</h3><ul class="block-list tag-list clearfix"><li class="tag-item"><a class="tag-link" href="/tags/JAVA集合类/">JAVA集合类</a></li><li class="tag-item"><a class="tag-link" href="/tags/Oracle/">Oracle</a></li><li class="tag-item"><a class="tag-link" href="/tags/SQL/">SQL</a></li><li class="tag-item"><a class="tag-link" href="/tags/中文乱码/">中文乱码</a></li><li class="tag-item"><a class="tag-link" href="/tags/工具/">工具</a></li><li class="tag-item"><a class="tag-link" href="/tags/数据库/">数据库</a></li></ul></div><div class="sidebar__block"><h3 class="block__title">文章分类</h3><ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/Oracle/">Oracle</a><span class="block-list-count">5</span><ul class="block-list-child"><li class="block-list-item"><a class="block-list-link" href="/categories/Oracle/SQL/">SQL</a><span class="block-list-count">4</span></li></ul></li><li class="block-list-item"><a class="block-list-link" href="/categories/Markdown/">Markdown</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/Java基础/">Java基础</a><span class="block-list-count">2</span><ul class="block-list-child"><li class="block-list-item"><a class="block-list-link" href="/categories/Java基础/集合类/">集合类</a><span class="block-list-count">2</span></li></ul></li></ul></div><div class="sidebar__block"><h3 class="block__title">最新文章</h3><ul class="block-list latest-post-list"><li class="latest-post-item"><a href="/2018/03/15/javaBase2/" title="Java集合类02 ArrayList"><div class="item__cover"><img src="/img/java.jpg" alt="Java集合类02 ArrayList"></div><div class="item__info"><h3 class="item__title">Java集合类02 ArrayList</h3><span class="item__text">2018-03-15</span></div></a></li><li class="latest-post-item"><a href="/2018/03/15/javaBase/" title="Java集合类01 总体框架"><div class="item__cover"><img src="/img/java.jpg" alt="Java集合类01 总体框架"></div><div class="item__info"><h3 class="item__title">Java集合类01 总体框架</h3><span class="item__text">2018-03-15</span></div></a></li><li class="latest-post-item"><a href="/2018/03/14/Oracle基本命令04/" title="Oracle多表查询"><div class="item__cover"><img src="/img/oracle.gif" alt="Oracle多表查询"></div><div class="item__info"><h3 class="item__title">Oracle多表查询</h3><span class="item__text">2018-03-14</span></div></a></li><li class="latest-post-item"><a href="/2018/03/14/Oracle基本命令03/" title="Oracle多行函数"><div class="item__cover"><img src="/img/oracle.gif" alt="Oracle多行函数"></div><div class="item__info"><h3 class="item__title">Oracle多行函数</h3><span class="item__text">2018-03-14</span></div></a></li></ul></div></aside></main><footer class="page__footer"><section class="footer__top"><div class="page__container footer__container"><div class="footer-top__item footer-top__item--2"><h3 class="item__title">关于</h3><div class="item__content"><p class="item__text">本站是基于 Hexo 搭建的静态资源博客，主要用于分享日常学习、生活及工作的一些心得总结，欢迎点击右下角订阅 rss。</p><ul class="footer__contact-info"><li class="contact-info__item"><i class="iconfont icon-address"></i> <span>Guangzhou, Guangdong Province, China</span></li><li class="contact-info__item"><i class="iconfont icon-email2"></i> <span>Bintao_Ma@163.com</span></li></ul></div></div><div class="footer-top__item footer__image"><img src="/img/qrcode.jpg" alt="logo" title="Maker"></div></div></section><section class="footer__bottom"><div class="page__container footer__container"><p class="footer__copyright">© <a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank">Skapp</a> 2017 powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, made by <a href="https://github.com/Mrminfive" target="_blank">minfive</a>.</p><ul class="footer__social-network clearfix"><li class="social-network__item"><a href="https://github.com/Mabintao" target="_blank" title="github"><i class="iconfont icon-github"></i></a></li><li class="social-network__item"><a href="mailto:Bintao_Ma@163.com" target="_blank" title="email"><i class="iconfont icon-email"></i></a></li><li class="social-network__item"><a href="/atom.xml" target="_blank" title="rss"><i class="iconfont icon-rss"></i></a></li></ul></div></section></footer><div id="back-top" class="back-top back-top--hidden js-hidden"><i class="iconfont icon-top"></i></div></div><script src="/js/common.js"></script><script src="/js/page/post.js"></script><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>